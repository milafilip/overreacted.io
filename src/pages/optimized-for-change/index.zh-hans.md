---
title: 为迎接改变优化
date: '2018-12-12'
spoiler: 什么造就了优秀的API?
---

什么造就了优秀的API？

*优秀的* API 设计是便于记忆以及清晰不含糊的。它能促使代码变得可读性强，执行正确，以及性能优异, 也能帮助开发者进入[成功之坑](https://blog.codinghorror.com/falling-into-the-pit-of-success/)。

我把这些设计层面叫做 “第一级”，因为这些是一个库开发者需要关注的优先事项。你可能需要在它们中的某些上做妥协和权衡，但是至少这些都是你的考虑点。

然而，除非你是要将一个漫游者发往火星，不然你的代码很有可能随着时间而改变。同样，你API使用者的代码也是一样。

我所知道的最好的API设计者们不会停留于这些“第一级”层面，比如可读性。他们即使不是花更多，至少也是相同的精力，在那些我称为“第二级”的API设计层面上：**使用这些API的代码如何随时间迭代。**

需求上一个微小的改动可能使得最优雅的代码也不能跑了。

*优秀的* API对这一点是有预期的。它们预料到你可能想移动一些代码；复制粘贴一部分；重命名；将一些特殊例子整合成一个通用的、可重复利用的辅助函数；将一个抽象解构成一些具体实例；加一个hack；优化一个瓶颈；抛弃一部分代码重写；犯了一个错误；在起因和结果间跳转；修复了一个bug；审阅了一个代码修复。

优秀的API不仅仅让你进入成功之坑里，而且能帮你*驻留*在那里。

它们为迎接改变优化了。
